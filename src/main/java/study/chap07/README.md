### 7. 대역

#### 7.1 외부 상태는 대역을 사용하기

##### 외부 API 호출

- `StubCardNumberValidator`: 실제 API 호출 대신 `setInvalidNo`, `validate`를 직접 정의해서 원하는 동작을 수행하는 객체로 사용
- 원래 API를 호출하는 클래스를 상속한 Stub 사용
- 필요한 값을 세팅할 수 있는 메서드 추가
- 아하! 그래서 역할에 따라 클래스를 쪼개는 게 중요하구나
- 인터페이스와 구현체를 사용하는 이유도 그것

##### DB 테스트 (Repository)

- `MemoryAuthoDebitInfoRepository`: 인터페이스를 구현한 대역 리포지토리 클래스. HashMap을 정의하고, 메서드로 DB 및 조회 로직을 구현
- Map을 사용한 대역 리포지토리를 만들면, 영속성 없이 메모리에서만 올린 리포지토리로 테스트 가능


- Stub 좋은 점: 확장에 용이(메서드로 동작 추가), 외부 상황에 대한 검증 가능

#### 7.2 대역의 종류

| 대역 종류 | 설명                                                             |
|-------|----------------------------------------------------------------|
| Stub  | 구현을 단순한 것으로 대체. 단순히 원하는 동작을 수행함.                               |
| Fake  | 제품에는 적합하지 않지만, 실제 동작하는 구현을 제공.                                 |
| Spy   | 호출된 내역을 기록. 기록한 내용은 테스트 결과 검증에 사용. 스텁의 일종  예) 어떤 행위가 수행되었는지 검증 |
| Mock  | 기대한 대로 상호작용하는지 행위를 검증. 기대한 대로 동작하지 않으면 익셉션 발생 가능. 스텁이자 스파이     |

